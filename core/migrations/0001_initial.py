# Generated by Django 5.2 on 2025-09-26 12:04

import core.enums
import core.fields
import django.db.models.deletion
import django_choices_field.fields
import simple_history.models
import taggit.managers
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('authentikate', '0002_membership'),
        ('taggit', '0006_rename_taggeditem_content_type_object_id_taggit_tagg_content_8fc721_idx'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='S3Store',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('path', core.fields.S3Field(blank=True, help_text='The store of the image', max_length=500, null=True, unique=True)),
                ('key', models.CharField(max_length=1000)),
                ('bucket', models.CharField(max_length=1000)),
                ('populated', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='Instrument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=1000)),
                ('manufacturer', models.CharField(blank=True, max_length=1000, null=True)),
                ('model', models.CharField(blank=True, max_length=1000, null=True)),
                ('serial_number', models.CharField(max_length=1000, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='Recording',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('kind', django_choices_field.fields.TextChoicesField(choices=[('TIME', 'Mask (Value represent Labels)'), ('VOLTAGE', 'Voltage (Value represent Intensity)'), ('CURRENT', 'Current (Value represent Intensity)'), ('INA', 'INA (Value represent Intensity)')], choices_enum=core.enums.RecodingKindChoices, default='VOLTAGE', help_text='The Representation can have vasrying kind, consult your API', max_length=7)),
                ('cell', models.CharField(help_text='The cell of the recording', max_length=1000)),
                ('location', models.CharField(help_text='The location of the recording', max_length=1000)),
                ('position', models.CharField(help_text='The position of the recording', max_length=1000)),
                ('label', models.CharField(help_text='The label of the recording', max_length=1000)),
            ],
        ),
        migrations.CreateModel(
            name='ViewCollection',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='The name of the view', max_length=1000)),
            ],
        ),
        migrations.CreateModel(
            name='BigFileStore',
            fields=[
                ('s3store_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='core.s3store')),
            ],
            bases=('core.s3store',),
        ),
        migrations.CreateModel(
            name='MediaStore',
            fields=[
                ('s3store_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='core.s3store')),
            ],
            bases=('core.s3store',),
        ),
        migrations.CreateModel(
            name='ParquetStore',
            fields=[
                ('s3store_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='core.s3store')),
            ],
            bases=('core.s3store',),
        ),
        migrations.CreateModel(
            name='ZarrStore',
            fields=[
                ('s3store_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='core.s3store')),
                ('shape', models.JSONField(blank=True, null=True)),
                ('chunks', models.JSONField(blank=True, null=True)),
                ('dtype', models.CharField(blank=True, max_length=1000, null=True)),
            ],
            bases=('core.s3store',),
        ),
        migrations.CreateModel(
            name='Block',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='The name of the recording session', max_length=1000)),
                ('description', models.CharField(blank=True, max_length=1000, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('acquired_at', models.DateTimeField(blank=True, help_text='The time the recording session was acquired', null=True)),
                ('creator', models.ForeignKey(help_text='The user that created the recording session', null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('pinned_by', models.ManyToManyField(help_text='The users that have pinned the recording session', related_name='pinned_recording_sessions', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='BlockGroup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('label', models.CharField(help_text='The label of the recording group', max_length=1000)),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.block')),
            ],
        ),
        migrations.CreateModel(
            name='BlockSegment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='core.block')),
            ],
        ),
        migrations.CreateModel(
            name='AnalogSignal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(default='', help_text='The name of the signal', max_length=1000)),
                ('sampling_rate', models.FloatField(default=1000.0, help_text='The sampling frequency of the signal in Hz')),
                ('unit', models.CharField(blank=True, default='mV', help_text='The unit of the signal', max_length=100, null=True)),
                ('pinned_by', models.ManyToManyField(blank=True, help_text='The users that pinned this segment', related_name='pinned_segments', to=settings.AUTH_USER_MODEL)),
                ('recording_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='analog_signals', to='core.blocksegment')),
            ],
        ),
        migrations.CreateModel(
            name='Dataset',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='The time the dataset was created')),
                ('name', models.CharField(help_text='The name of the dataset', max_length=200)),
                ('description', models.CharField(blank=True, help_text='The description of the dataset', max_length=1000, null=True)),
                ('is_default', models.BooleanField(default=False, help_text='Whether the dataset is the current default dataset for the user')),
                ('creator', models.ForeignKey(help_text='The user that created the dataset', on_delete=django.db.models.deletion.CASCADE, related_name='created_datasets', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(help_text='The organization that owns the dataset', on_delete=django.db.models.deletion.CASCADE, related_name='datasets', to='authentikate.organization')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='core.dataset')),
                ('pinned_by', models.ManyToManyField(blank=True, help_text='The users that have pinned the dataset', related_name='pinned_datasets', to=settings.AUTH_USER_MODEL)),
                ('tags', taggit.managers.TaggableManager(help_text='Tags for the dataset', through='taggit.TaggedItem', to='taggit.Tag', verbose_name='Tags')),
            ],
        ),
        migrations.AddField(
            model_name='block',
            name='dataset',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='blocks', to='core.dataset'),
        ),
        migrations.CreateModel(
            name='Experiment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='The name of the experiment', max_length=1000)),
                ('description', models.CharField(blank=True, max_length=1000, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('creator', models.ForeignKey(help_text='The user that created the experiment', null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('pinned_by', models.ManyToManyField(help_text='The users that have pinned the experiment', related_name='pinned_experiments', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='File',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(default='', help_text='The name of the file', max_length=1000)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('creator', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('dataset', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='files', to='core.dataset')),
                ('origins', models.ManyToManyField(related_name='derived', to='core.file')),
                ('store', models.ForeignKey(blank=True, help_text='The store of the file', null=True, on_delete=django.db.models.deletion.CASCADE, to='core.bigfilestore')),
            ],
        ),
        migrations.AddField(
            model_name='block',
            name='origin',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='blocks', to='core.file'),
        ),
        migrations.CreateModel(
            name='HistoricalBlock',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('name', models.CharField(help_text='The name of the recording session', max_length=1000)),
                ('description', models.CharField(blank=True, max_length=1000, null=True)),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('acquired_at', models.DateTimeField(blank=True, help_text='The time the recording session was acquired', null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('creator', models.ForeignKey(blank=True, db_constraint=False, help_text='The user that created the recording session', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('dataset', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.dataset')),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.block')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('origin', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.file')),
            ],
            options={
                'verbose_name': 'historical block',
                'verbose_name_plural': 'historical blocks',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalDataset',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('created_at', models.DateTimeField(blank=True, editable=False, help_text='The time the dataset was created')),
                ('name', models.CharField(help_text='The name of the dataset', max_length=200)),
                ('description', models.CharField(blank=True, help_text='The description of the dataset', max_length=1000, null=True)),
                ('is_default', models.BooleanField(default=False, help_text='Whether the dataset is the current default dataset for the user')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('creator', models.ForeignKey(blank=True, db_constraint=False, help_text='The user that created the dataset', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.dataset')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(blank=True, db_constraint=False, help_text='The organization that owns the dataset', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='authentikate.organization')),
                ('parent', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.dataset')),
            ],
            options={
                'verbose_name': 'historical dataset',
                'verbose_name_plural': 'historical datasets',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalInstrument',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('name', models.CharField(max_length=1000)),
                ('manufacturer', models.CharField(blank=True, max_length=1000, null=True)),
                ('model', models.CharField(blank=True, max_length=1000, null=True)),
                ('serial_number', models.CharField(db_index=True, max_length=1000)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.instrument')),
            ],
            options={
                'verbose_name': 'historical instrument',
                'verbose_name_plural': 'historical instruments',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='NeuronModel',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('hash', models.CharField(help_text='The hash of the model', max_length=1000, unique=True)),
                ('json_model', models.JSONField(blank=True, default=dict, help_text='The json model of the neuron')),
                ('name', models.CharField(help_text='The name of the model', max_length=1000)),
                ('description', models.CharField(blank=True, max_length=1000, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('creator', models.ForeignKey(help_text='The user that created the model', null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('parent', models.ForeignKey(blank=True, help_text='The parent model of the neuron', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='core.neuronmodel')),
                ('pinned_by', models.ManyToManyField(help_text='The users that have pinned the model', related_name='pinned_models', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ModelCollection',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='The name of the model collection', max_length=1000)),
                ('description', models.CharField(blank=True, max_length=1000, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('creator', models.ForeignKey(help_text='The user that created the model collection', null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('pinned_by', models.ManyToManyField(help_text='The users that have pinned the model collection', related_name='pinned_model_collections', to=settings.AUTH_USER_MODEL)),
                ('comparison', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='comparing_collections', to='core.neuronmodel')),
                ('models', models.ManyToManyField(help_text='The models that are in the collection', related_name='model_collections', to='core.neuronmodel')),
            ],
        ),
        migrations.CreateModel(
            name='ExperimentRecordingView',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('offset', models.FloatField(blank=True, help_text='The offset of the view in seconds', null=True)),
                ('duration', models.FloatField(blank=True, help_text='The duration of the view in seconds', null=True)),
                ('label', models.CharField(blank=True, help_text='The label of the view', max_length=1000, null=True)),
                ('experiment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='recording_views', to='core.experiment')),
                ('recording', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='experiment_views', to='core.recording')),
            ],
        ),
        migrations.CreateModel(
            name='Simulation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('duration', models.FloatField(help_text='The duration of the run in seconds')),
                ('dt', models.FloatField(default=1.0, help_text='The time step of the run in seconds')),
                ('name', models.CharField(help_text='The name of the run', max_length=1000)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('creator', models.ForeignKey(help_text='The user that created the run', null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('model', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='simulations', to='core.neuronmodel')),
            ],
        ),
        migrations.AddField(
            model_name='recording',
            name='simulation',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='recordings', to='core.simulation'),
        ),
        migrations.CreateModel(
            name='Stimulus',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('kind', django_choices_field.fields.TextChoicesField(choices=[('CURRENT', 'Current (Value represent Intensity)'), ('VOLTAGE', 'Voltage (Value represent Intensity)')], choices_enum=core.enums.StimulusKindChoices, default='CURRENT', help_text='The Representastion can have vasrying kind, consult your API', max_length=7)),
                ('cell', models.CharField(help_text='The cell thsat was ssrecorded', max_length=1000)),
                ('location', models.CharField(help_text='The location of the recording', max_length=1000)),
                ('position', models.CharField(help_text='The position of the recording', max_length=1000)),
                ('label', models.CharField(help_text='The label of the recording', max_length=1000)),
                ('simulation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stimuli', to='core.simulation')),
            ],
        ),
        migrations.CreateModel(
            name='ExperimentStimulusView',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('offset', models.FloatField(blank=True, help_text='The offset of the view in seconds', null=True)),
                ('duration', models.FloatField(blank=True, help_text='The duration of the view in seconds', null=True)),
                ('label', models.CharField(blank=True, help_text='The label of the view', max_length=1000, null=True)),
                ('experiment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='stimulus_views', to='core.experiment')),
                ('stimulus', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='experiment_views', to='core.stimulus')),
            ],
        ),
        migrations.CreateModel(
            name='Trace',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(default='', help_text='The name of the image', max_length=1000)),
                ('description', models.CharField(blank=True, max_length=1000, null=True)),
                ('kind', django_choices_field.fields.TextChoicesField(choices=[('TIME', 'Mask (Value represent Labels)'), ('VOLTAGE', 'Voltage (Value represent Intensity)'), ('CURRENT', 'Current (Value represent Intensity)'), ('UNKNOWN', 'Unknown')], choices_enum=core.enums.TraceKindChoices, default='UNKNOWN', help_text='The Representation can have vasrying kind, consult your API', max_length=7)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('dataset', models.ForeignKey(blank=True, help_text='The dataset that the trace belongs to', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='traces', to='core.dataset')),
                ('organization', models.ForeignKey(help_text='The organization that owns the dataset', on_delete=django.db.models.deletion.CASCADE, related_name='traces', to='authentikate.organization')),
                ('pinned_by', models.ManyToManyField(help_text='The users that have pinned the images', related_name='pinned_traces', to=settings.AUTH_USER_MODEL)),
                ('tags', taggit.managers.TaggableManager(help_text='A comma-separated list of tags.', through='taggit.TaggedItem', to='taggit.Tag', verbose_name='Tags')),
                ('store', models.ForeignKey(blank=True, help_text='The store of the trace', null=True, on_delete=django.db.models.deletion.CASCADE, to='core.zarrstore')),
            ],
            options={
                'permissions': [('inspect_image', 'Can view image')],
            },
        ),
        migrations.AddField(
            model_name='stimulus',
            name='trace',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stimuli', to='core.trace'),
        ),
        migrations.CreateModel(
            name='SpikeTrain',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(default='', help_text='The name of the signal', max_length=1000)),
                ('unit', models.CharField(blank=True, default='sec', help_text='The unit of the signal', max_length=100, null=True)),
                ('pinned_by', models.ManyToManyField(blank=True, help_text='The users that pinned this segment', related_name='pinned_spike_trains', to=settings.AUTH_USER_MODEL)),
                ('recording_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='spike_trains', to='core.blocksegment')),
                ('trace', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='spike_trains', to='core.trace')),
            ],
        ),
        migrations.AddField(
            model_name='simulation',
            name='time_trace',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='simulations', to='core.trace'),
        ),
        migrations.CreateModel(
            name='ROI',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('label', models.CharField(blank=True, help_text='The label of the ROI', max_length=1000, null=True)),
                ('vectors', models.JSONField(default=list, help_text='A list of the ROI Vectors (specific for each type)', max_length=3000)),
                ('max_t', models.IntegerField(default=0, help_text='The maximum time of the ROI')),
                ('min_t', models.IntegerField(default=0, help_text='The minimum time of the ROI')),
                ('kind', django_choices_field.fields.TextChoicesField(choices=[('line', 'Line'), ('point', 'Point'), ('spike', 'Spike'), ('slice', 'Slice')], choices_enum=core.enums.RoiKindChoices, default='spike', help_text='The Roi can have vasrying kind, consult your API', max_length=5)),
                ('color', models.CharField(blank=True, help_text='The color of the ROI (for UI)', max_length=100, null=True)),
                ('created_at', models.DateTimeField(auto_now=True, help_text='The time the ROI was created')),
                ('creator', models.ForeignKey(help_text='The user that created the ROI', on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('pinned_by', models.ManyToManyField(blank=True, help_text='The users that pinned this ROI', related_name='pinned_rois', to=settings.AUTH_USER_MODEL)),
                ('trace', models.ForeignKey(help_text='The Representation this ROI was original used to create (drawn on)', on_delete=django.db.models.deletion.CASCADE, related_name='rois', to='core.trace')),
            ],
        ),
        migrations.AddField(
            model_name='recording',
            name='trace',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='recordings', to='core.trace'),
        ),
        migrations.CreateModel(
            name='IrregularlySampledSignal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(default='', help_text='The name of the signal', max_length=1000)),
                ('pinned_by', models.ManyToManyField(blank=True, help_text='The users that pinned this segment', related_name='pinned_irregularly_sampled_segments', to=settings.AUTH_USER_MODEL)),
                ('recording_segment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='irregularly_sampled_segments', to='core.blocksegment')),
                ('time_trace', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='irregularly_sampled_time_segments', to='core.trace')),
                ('trace', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='irregularly_sampled_segments', to='core.trace')),
            ],
        ),
        migrations.CreateModel(
            name='HistoricalSpikeTrain',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('name', models.CharField(default='', help_text='The name of the signal', max_length=1000)),
                ('unit', models.CharField(blank=True, default='sec', help_text='The unit of the signal', max_length=100, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('recording_segment', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.blocksegment')),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.spiketrain')),
                ('trace', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.trace')),
            ],
            options={
                'verbose_name': 'historical spike train',
                'verbose_name_plural': 'historical spike trains',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalROI',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('label', models.CharField(blank=True, help_text='The label of the ROI', max_length=1000, null=True)),
                ('vectors', models.JSONField(default=list, help_text='A list of the ROI Vectors (specific for each type)', max_length=3000)),
                ('max_t', models.IntegerField(default=0, help_text='The maximum time of the ROI')),
                ('min_t', models.IntegerField(default=0, help_text='The minimum time of the ROI')),
                ('kind', django_choices_field.fields.TextChoicesField(choices=[('line', 'Line'), ('point', 'Point'), ('spike', 'Spike'), ('slice', 'Slice')], choices_enum=core.enums.RoiKindChoices, default='spike', help_text='The Roi can have vasrying kind, consult your API', max_length=5)),
                ('color', models.CharField(blank=True, help_text='The color of the ROI (for UI)', max_length=100, null=True)),
                ('created_at', models.DateTimeField(blank=True, editable=False, help_text='The time the ROI was created')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('creator', models.ForeignKey(blank=True, db_constraint=False, help_text='The user that created the ROI', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.roi')),
                ('trace', models.ForeignKey(blank=True, db_constraint=False, help_text='The Representation this ROI was original used to create (drawn on)', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.trace')),
            ],
            options={
                'verbose_name': 'historical roi',
                'verbose_name_plural': 'historical rois',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalIrregularlySampledSignal',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('name', models.CharField(default='', help_text='The name of the signal', max_length=1000)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('recording_segment', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.blocksegment')),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.irregularlysampledsignal')),
                ('time_trace', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.trace')),
                ('trace', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.trace')),
            ],
            options={
                'verbose_name': 'historical irregularly sampled signal',
                'verbose_name_plural': 'historical irregularly sampled signals',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalExperiment',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('name', models.CharField(help_text='The name of the experiment', max_length=1000)),
                ('description', models.CharField(blank=True, max_length=1000, null=True)),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('creator', models.ForeignKey(blank=True, db_constraint=False, help_text='The user that created the experiment', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.experiment')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('time_trace', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.trace')),
            ],
            options={
                'verbose_name': 'historical experiment',
                'verbose_name_plural': 'historical experiments',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalAnalogSignal',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('name', models.CharField(default='', help_text='The name of the signal', max_length=1000)),
                ('sampling_rate', models.FloatField(default=1000.0, help_text='The sampling frequency of the signal in Hz')),
                ('unit', models.CharField(blank=True, default='mV', help_text='The unit of the signal', max_length=100, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.analogsignal')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('recording_segment', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.blocksegment')),
                ('trace', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.trace')),
            ],
            options={
                'verbose_name': 'historical analog signal',
                'verbose_name_plural': 'historical analog signals',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AddField(
            model_name='experiment',
            name='time_trace',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='experiments', to='core.trace'),
        ),
        migrations.AddField(
            model_name='analogsignal',
            name='trace',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='segments', to='core.trace'),
        ),
        migrations.CreateModel(
            name='TimelineView',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('a_min', models.IntegerField(blank=True, help_text='The index of the channel', null=True)),
                ('a_max', models.IntegerField(blank=True, help_text='The index of the channel', null=True)),
                ('t_min', models.IntegerField(blank=True, help_text='The index of the channel', null=True)),
                ('t_max', models.IntegerField(blank=True, help_text='The index of the channel', null=True)),
                ('c_min', models.IntegerField(blank=True, help_text='The index of the channel', null=True)),
                ('c_max', models.IntegerField(blank=True, help_text='The index of the channel', null=True)),
                ('is_global', models.BooleanField(default=False, help_text='Whether the view is global or not')),
                ('start_time', models.DateTimeField(blank=True, help_text='The start time of the view', null=True)),
                ('end_time', models.DateTimeField(blank=True, help_text='The end time of the view', null=True)),
                ('trace', simple_history.models.HistoricForeignKey(on_delete=django.db.models.deletion.CASCADE, to='core.trace')),
                ('collection', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='core.viewcollection')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='HistoricalViewCollection',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('name', models.CharField(help_text='The name of the view', max_length=1000)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.viewcollection')),
            ],
            options={
                'verbose_name': 'historical view collection',
                'verbose_name_plural': 'historical view collections',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalTrace',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('assignation_id', models.CharField(blank=True, max_length=1000, null=True)),
                ('name', models.CharField(default='', help_text='The name of the image', max_length=1000)),
                ('description', models.CharField(blank=True, max_length=1000, null=True)),
                ('kind', django_choices_field.fields.TextChoicesField(choices=[('TIME', 'Mask (Value represent Labels)'), ('VOLTAGE', 'Voltage (Value represent Intensity)'), ('CURRENT', 'Current (Value represent Intensity)'), ('UNKNOWN', 'Unknown')], choices_enum=core.enums.TraceKindChoices, default='UNKNOWN', help_text='The Representation can have vasrying kind, consult your API', max_length=7)),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='authentikate.client')),
                ('creator', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('dataset', models.ForeignKey(blank=True, db_constraint=False, help_text='The dataset that the trace belongs to', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.dataset')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(blank=True, db_constraint=False, help_text='The organization that owns the dataset', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='authentikate.organization')),
                ('history_relation', models.ForeignKey(db_constraint=False, on_delete=django.db.models.deletion.DO_NOTHING, related_name='provenance_entries', to='core.trace')),
                ('store', models.ForeignKey(blank=True, db_constraint=False, help_text='The store of the trace', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.zarrstore')),
            ],
            options={
                'verbose_name': 'historical trace',
                'verbose_name_plural': 'historical traces',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AddConstraint(
            model_name='dataset',
            constraint=models.UniqueConstraint(condition=models.Q(('is_default', True)), fields=('creator', 'is_default'), name='unique_default_per_creator'),
        ),
    ]
